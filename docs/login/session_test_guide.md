# 异地登录检测功能测试指南

## 一、测试环境准备

### 1. 基本要求
- 确保系统正常运行
- 准备两个不同的浏览器（如Chrome和Firefox）或者：
  - 一个普通浏览器窗口
  - 一个隐私模式/无痕浏览窗口

### 2. 测试账号
- 准备至少一个测试用户账号
- 记录好账号和密码信息
- 确保账号未被锁定

## 二、测试场景

### 1. 基础登录测试
1. 使用浏览器A登录系统
   - 预期结果：登录成功
   - 验证点：可以正常访问系统功能

2. 查看登录状态
   - 检查页面上的用户信息显示
   - 验证点：显示正确的用户名

### 2. 异地登录测试

#### 场景一：检测异地登录
1. 保持浏览器A的登录状态
2. 使用浏览器B尝试登录同一账号
   - 预期结果：登录失败
   - 错误提示：`该账号已在其他地方登录，IP: xxx.xxx.xxx.xxx`

#### 场景二：会话检查
1. 浏览器A中正常登录
2. 浏览器B尝试访问系统页面
   - 预期结果：自动跳转到登录页
   - 验证点：未登录状态下无法访问系统

### 3. 会话超时测试

#### 场景一：自动超时
1. 登录系统后不进行任何操作
2. 等待30分钟
3. 尝试进行任何操作
   - 预期结果：提示会话已过期
   - 验证点：自动跳转到登录页

#### 场景二：并发会话
1. 浏览器A登录
2. 浏览器B强制登录同一账号
3. 回到浏览器A刷新页面或操作
   - 预期结果：提示已在其他地方登录
   - 验证点：自动跳转到登录页

### 4. 登出测试

#### 场景一：主动登出
1. 正常登录系统
2. 点击登出按钮
   - 预期结果：成功登出
   - 验证点：
     - 跳转到登录页
     - 清除了会话信息
     - 再次访问需要重新登录

#### 场景二：登出后再登录
1. 执行登出操作
2. 立即重新登录
   - 预期结果：可以正常登录
   - 验证点：不会提示异地登录

## 三、特殊场景测试

### 1. 网络异常测试
1. 登录系统
2. 断开网络连接
3. 恢复网络连接
4. 进行操作
   - 预期结果：会话状态正常维持
   - 验证点：不会误判为异地登录

### 2. 浏览器刷新测试
1. 正常登录
2. 反复刷新页面
   - 预期结果：会话正常维持
   - 验证点：不会出现异常提示

## 四、测试记录表

| 测试场景 | 测试步骤 | 预期结果 | 实际结果 | 是否通过 |
|---------|---------|----------|----------|----------|
| 基础登录 | 1. 输入账号密码<br>2. 点击登录 | 登录成功 | | |
| 异地登录检测 | 1. A浏览器登录<br>2. B浏览器登录 | B浏览器提示已在其他地方登录 | | |
| 会话超时 | 等待30分钟后操作 | 提示会话过期 | | |
| 主动登出 | 点击登出按钮 | 成功登出并跳转登录页 | | |

## 五、问题记录

### 问题记录模板
- 问题现象：
- 复现步骤：
- 期望结果：
- 实际结果：
- 可能原因：
- 解决方案：

## 六、测试注意事项

1. 时间要求
   - 会话超时测试可以考虑临时修改超时时间为较短值
   - 建议在非业务时间进行测试

2. 环境要求
   - 确保测试环境网络稳定
   - 不同浏览器的Cookie存储是独立的
   - 建议使用无痕模式进行测试

3. 数据要求
   - 使用测试账号，避免影响正式用户
   - 测试前确保账号状态正常
   - 记录好测试数据和结果

4. 安全要求
   - 测试完成后及时清理浏览器缓存
   - 确保测试账号密码妥善保管
   - 避免在公共场所进行测试 